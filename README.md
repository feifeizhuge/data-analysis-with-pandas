# data-analysis-with-pandas
## what is it? 

pandasæ˜¯pythonçš„ä¸€ä¸ªåŒ…ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤„ç†è¡¨æ ¼æ–‡ä»¶ï¼Œåˆ†ææ•°æ®ã€‚ä½†æ˜¯å…¶å‡½æ•°éå¸¸çš„å¤šï¼Œæœ‰æ—¶å€™ä¼šå› ä¸ºç»å¸¸ä¸ç”¨ï¼Œè€Œä¸å¤Ÿç†Ÿç»ƒã€‚å› æ­¤å°†å¹³æ—¶åˆ†æè¿‡çš„æ¡ˆä¾‹è®°å½•åœ¨è¿™é‡Œï¼Œæ–¹ä¾¿å­¦ä¹ å’Œç†Ÿæ‚‰pandasçš„ä½¿ç”¨

## Let's do it
### 1.è¯»å–æ•°æ®
ToDo: æ€ä¹ˆè¯»å–æ•°æ®ï¼Œæ€ä¹ˆå®è§‚çš„è§‚å¯Ÿæ•°æ®
### 2.æ•°æ®æ¸…æ´—
è¯»å–å®Œæ•°æ®åï¼Œæˆ‘ä»¬å°±éœ€è¦å¤„ç†çš„åˆ†ææ•°æ®äº†ï¼Œä¹Ÿå°±æ˜¯æœ€æ¶ˆè€—æ—¶é—´çš„æ•°æ®æ¸…æ´—ï¼Œè™½ç„¶è¿™ä¸ªè¿‡ç¨‹å¾ˆç¹çï¼Œä½†æ˜¯å†å‰å®³çš„ç®—æ³•ä¹Ÿç¦»ä¸å¼€ï¼Œå¹²å‡€æ•´æ´çš„æ•°æ®ğŸ˜
#### 2.1 æ•°æ®å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ
åœ¨å¤„ç†ä¸€äº›å·¥ä¸šè®°å½•çš„æ•°æ®çš„æ—¶å€™ï¼Œä¼šç»å¸¸å‘ç°ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ•°æ®ç‚¹å¤ªå¤šäº†ï¼Œæ¯”å¦‚ä¸€ç§’é‡‡é›†30ä¸ªæ•°æ®ç‚¹ï¼Œè¿™å¯¹äºæ—¶é—´è·¨åº¦é•¿è¾¾ä¸€å¤©æˆ–è€…ä¸€å‘¨çš„æ€»ä½“æ•°æ®æ¥è¯´ï¼Œè¿™ä¸ªé‡‡æ ·é¢‘ç‡å®åœ¨æ˜¯å¤ªé«˜äº†ã€‚   
åœ¨E-busçš„æ•°æ®ä¸­ï¼Œè¯»å…¥çš„åŸå§‹æ•°æ®æœ‰(2928756, 87),æŸ¥çœ‹æ—¶é—´æˆ³è¿™ä¸€åˆ—ï¼Œå‘ç°æ•°æ®éå¸¸çš„å†—ä½™
```python
print(X['Time [Europe/Amsterdam]'][0:40])
# Output:
0     2016-02-10 03:51:26:227
1     2016-02-10 03:51:26:228
2     2016-02-10 03:51:26:231
3     2016-02-10 03:51:26:232
4     2016-02-10 03:51:26:233
5     2016-02-10 03:51:26:235
6     2016-02-10 03:51:26:243
7     2016-02-10 03:51:26:245
8     2016-02-10 03:51:26:252
9     2016-02-10 03:51:26:264
...
```
è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œæ¯«ç§’çº§åˆ«çš„æ•°æ®å‡ ä¹æ¯«æ— æ„ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›è¡Œé™é‡‡æ ·ï¼ŒæŠŠæ•°æ®é‡å‡å°‘ã€‚æ€è·¯å°±æ˜¯ï¼š   
1. å¯¹`'Time [Europe/Amsterdam]'`è¿™åˆ—æ•°æ®ï¼Œè¿›è¡Œåˆ‡ç‰‡`X = X[0::20]`ï¼Œæ¯éš”20ä¸ªæ•°æ®é‡‡é›†ä¸€ä¸ªç‚¹ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼Œå‘ç°æ—¶é—´æˆ³å˜å¾—ç¨€ç–äº†ï¼Œä¼¼ä¹indexè¿˜æœ‰äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æœ€åå¤„ç†å®Œå†è°ƒæ•´
```python
print(X['Time [Europe/Amsterdam]'][0:40])
0      2016-02-10 03:51:26:227
20     2016-02-10 03:51:26:284
40     2016-02-10 03:51:26:506
60     2016-02-10 03:51:26:908
80     2016-02-10 03:51:27:511
100    2016-02-10 03:51:28:106
120    2016-02-10 03:51:28:723
140    2016-02-10 03:51:29:255
160    2016-02-10 03:51:29:907
...
```
2. æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ—¶é—´åˆ—çš„ç²¾åº¦ä¹‹å‰æ˜¯`æ¯«ç§’[ms]`,æˆ‘ä»¬ç°åœ¨æƒ³å˜æˆ`ç§’[s]`ã€‚ä»åˆ—`'Unix Timestamp [ms]'`å…¥æ‰‹ï¼Œ   

æ•°æ®  | ç±»å‹ |
--------- | --------|
Unix Timestamp [ms] | int64
Time [Europe/Amsterdam] | object

`object`æ•°æ®ç±»å‹ç›¸å½“äºpandas é‡Œé¢çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸å¥½ç›´æ¥è¿›è¡Œå¤„ç†ï¼Œè€Œ`Unix Timestamp [ms]`æ°å¥½æ˜¯`int64`æ–¹ä¾¿è¿›è¡Œè¿ç®—å¤„ç†ã€‚
```python
X['Unix Timestamp [ms]'][0:2]
Out[8]: 
0     1455072686227
20    1455072686284

X['Time [Europe/Amsterdam]'][0:2]
Out[9]: 
0     2016-02-10 03:51:26:227
20    2016-02-10 03:51:26:284
```
ç„¶åä»–ä»¬äºŒè€…ä¹‹é—´å¯ä»¥ç›¸äº’è½¬æ¢ï¼Œé€šè¿‡å‡½æ•°`pd.to_datetime(1455072686227,unit='ms')`
```python
pd.to_datetime(1455072686227,unit='ms')
Out[10]: Timestamp('2016-02-10 02:51:26.227000')
```
è¿™ä¸ªæ•°å€¼å’Œä¹‹å‰çš„å­—ç¬¦ä¸²æ—¶é—´æ ¼å¼ä¸€æ‘¸ä¸€æ ·ï¼Œå°±æ˜¯æ…¢äº†ä¸€ä¸ªå°æ—¶ï¼Œä¸è¿‡æ²¡å…³ç³»æˆ‘ä»¬ä¸‹ä¸€æ­¥è¿›è¡Œè°ƒæ•´
```python
pd.to_datetime(1455072686227//1000 + 60*60,unit='s')
Out[13]: Timestamp('2016-02-10 03:51:26')
```
è¿™æ ·å°±å®Œæˆäº†ï¼Œæ—¶é—´ç²¾åº¦çš„é™ä½ï¼Œå¤§å¤§é™ä½äº†æ•°æ®çš„å†—ä½™ã€‚ä¸‹ä¸€æ­¥å°±å¯ä»¥åˆ é™¤æ—¶é—´æˆ³ä¸­çš„é‡å¤é¡¹ã€‚
```python
# åˆ é™¤é‡å¤çš„æ•°å­—ï¼Œä¿å­˜ç¬¬ä¸€ä¸ªï¼ŒåŸåœ°ä¿®æ”¹æ•°æ®
X.drop_duplicates('Time [Europe/Amsterdam]','first',inplace=True)
ä¿®æ”¹å‰ï¼š
0      2016-02-10 03:51:26
20     2016-02-10 03:51:26
40     2016-02-10 03:51:26
60     2016-02-10 03:51:26
80     2016-02-10 03:51:27
100    2016-02-10 03:51:28
120    2016-02-10 03:51:28
140    2016-02-10 03:51:29
160    2016-02-10 03:51:29
ä¿®æ”¹åï¼š
0      2016-02-10 03:51:26
80     2016-02-10 03:51:27
100    2016-02-10 03:51:28
140    2016-02-10 03:51:29
```
è‡³æ­¤ä¿å­˜ä¿®æ”¹åçš„æ•°æ®ï¼Œå°±èƒ½å¾—åˆ°é™é‡‡æ ·åçš„æ•°æ®äº†(1.3GB ---> 21MB)
#### 2.2 å¤„ç†å¼‚å¸¸å€¼
ç”±äºå…¬äº¤è½¦ä¼ æ„Ÿå™¨çš„å¯åŠ¨é—®é¢˜ï¼Œé€šå¸¸åŸå§‹æ•°æ®çš„ç¬¬ä¸€è¡Œéƒ½æ˜¯Nanï¼Œä¸ºäº†åç»­å¤„ç†çš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬å…ˆå°†ç¬¬ä¸€è¡Œæ•°æ®åˆ é™¤æ‰ï¼š
```python
# åˆ é™¤ç¬¬ä¸€è¡Œçš„æ•°æ®ï¼ŒåŸåœ°ä¿®æ”¹
X.drop(X.index[0], inplace=True)
```
æ¥ä¸‹æ¥è·å–ï¼ŒåŸå§‹æ•°æ®ä¸­çš„ç‰¹å¾åˆ—è¡¨ï¼š
```python
# X.columns è¿”å›ä¸€ä¸ªseriesï¼Œé€šè¿‡valueå±æ€§è·å¾—ä¸€ä¸ªarray
Features_name = X.columns.values
```
åˆæ­¥ç­›é€‰æœ‰ä»·å€¼çš„ç‰¹å¾ï¼ŒæŠŠå…¨ä¸ºé›¶çš„ç‰¹å¾éƒ½åˆ é™¤æ‰ï¼š
```python
# print name of feature, which doesn't have value(Nan)
Feature_Nan = Features_name[X.isnull().all().values]
# drop the all columns which value are all Nan
X.dropna(axis=1, how='all', inplace=True)
```
åœ¨å‰©ä¸‹éNançš„ç‰¹å¾ä¸­ï¼Œå°†å€¼ä¸ºNançš„æ•°å­—éƒ½æ›¿æ¢æˆé›¶ï¼š
```python
# replace the Nan value with naught, because Nan value means no meansure happend
X.fillna(value=0, inplace=True)
```
å°†ä¹‹å‰å› ä¸ºä¿®æ”¹è€Œå˜å¾—æ··ä¹±çš„indexé‡æ–°æ’åˆ—ï¼š
```python
# drop=Trueï¼Œè¡¨ç¤ºä¸ä¿ç•™ä¹‹å‰çš„indexï¼›åŸåœ°ä¿®æ”¹
X.reset_index(drop=True, inplace=True)
```

#### 2.3 æ•°æ®åˆ†æ®µ
æ¥ä¸‹æ¥å°±æ˜¯é‡è¦çš„æ•°æ®åˆ†æ®µï¼Œå› ä¸ºå…¬äº¤è½¦æ•°æ®çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬è¦å°†åŸå§‹æ•°æ®ï¼Œåˆ†æ®µæˆä¸€åœˆä¸€åœˆçš„è¡Œé©¶è·¯ç¨‹ã€‚é€šè¿‡è§‚å¯Ÿæ‰€æœ‰çš„ç‰¹å¾ï¼Œæˆ‘ä»¬å‘ç°ä¿¡å·`'Primove - Pick-up position control'` å’Œåˆ†æ®µæœ‰å¾ˆå¤§çš„å…³è”ï¼Œä¸‹é™æ²¿è¡¨ç¤ºè½¦åœé ç»ˆç‚¹ç«™å¼€å§‹å……ç”µï¼Œä¸Šå‡æ²¿

æ¥ä¸‹æ¥å°±æ˜¯é‡è¦çš„æ•°æ®åˆ†æ®µï¼Œå› ä¸ºå…¬äº¤è½¦æ•°æ®çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬è¦å°†åŸå§‹æ•°æ®ï¼Œåˆ†æ®µæˆä¸€åœˆä¸€åœˆçš„è¡Œé©¶è·¯ç¨‹ã€‚é€šè¿‡è§‚å¯Ÿæ‰€æœ‰çš„ç‰¹å¾ï¼Œæˆ‘ä»¬å‘ç°ä¿¡å·`'Primove - Pick-up position control'` å’Œåˆ†æ®µæœ‰å¾ˆå¤§çš„å…³è”ï¼Œä¸‹é™æ²¿è¡¨ç¤ºè½¦åœé ç»ˆç‚¹ç«™å¼€å§‹å……ç”µï¼Œä¸Šå‡æ ·è¡¨ç¤ºå……ç”µç»“æŸï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡çš„è¡Œé©¶ã€‚
![Primove - Pick-up position control](https://github.com/feifeizhuge/data-analysis-with-pandas/blob/master/data-cleaning/control_signal_segmentation.png Pick-up position control)
